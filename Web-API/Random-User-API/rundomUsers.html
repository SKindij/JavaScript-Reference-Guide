<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>rundom-users</title>
    <style>
        h2 { font-size: 25px; color: DeepPurple }
	    p { font-size: 20px; color: BottleGreen}
    </style>
</head>
<body>
    <h1> Random User API.</h2>
    <p>Using the API, you get 10 users and bring them out on the page using Vanilla JavaScript.</p>

    <h2>Authors</h1>
    <ul id="authors"></ul>

<script>
	const ul = document.getElementById('authors');
	const url = 'https://randomuser.me/api/?results=10'; 
	
	function createNode(element) { return document.createElement(element); };
	function append(parent, el) { return parent.appendChild(el); };
	  
	function status(response) {  
      if (response.status >= 200 && response.status < 300) {  
	    console.log('Status:', response.status);
        return Promise.resolve(response)  
      } else { return Promise.reject(new Error(response.statusText)) }  
    };
    function json(response) { return response.json() }

    fetch(url)  
      .then(status)  
      .then(json)  
      .then(function(data) { console.log('Request succeeded with JSON response', data); })
      .catch(function(error) { console.log('Request failed', error); });  
	  
	fetch(url)  
        .then(status)  
        .then(json)    
	    .then(function(data) {
	      let authors = data.results;
		  // for each author in Authors variable, we need to create an element of list that displays portrait and name of author.
          return authors.map(function(author) {
            let li = createNode('li');
	    	let img = createNode('img');
            let span = createNode('span');
		      img.src = author.picture.medium;
			  // SPAN element must contain name and surname of the author
			  span.innerHTML = `${author.name.first} ${author.name.last}`;
			    // use the Append function to display these elements on the page
		  	    append(li, img);
                append(li, span);
                append(ul, li);
          })
	    })
        .catch(function(error) { console.log(error); });	  	  
</script>
</body>
</html>
